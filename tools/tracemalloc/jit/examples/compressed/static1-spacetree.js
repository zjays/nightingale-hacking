var Log={elem:$("log"),write:function(A){if(!this.elem){this.elem=$("log")}this.elem.set("html",A)}};function init(){Infovis.initLayout();var B=Feeder.makeTree();var A=new Canvas("infovis");st=new ST(A,{onBeforeCompute:function(D){Log.write("loading "+D.name)},onAfterCompute:function(){Log.write("done")},request:function(E,F,D){Feeder.request(E,F,D)}});st.loadFromJSON(B);st.compute();Tree.Geometry.translate(st.tree,new Complex(-200,0),"startPos");st.onClick(st.tree.id);var C=document.getElementById("switch");C.onclick=function(){st.switchPosition({onComplete:function(){}})}}var Feeder={counter:0,p:{idPrefix:"node",levelStart:0,levelEnd:3,maxChildrenPerNode:5,counter:0},makeTree:function(){var A=this.p.levelEnd;if(A==0){return{children:[]}}this.counter=1;return this.makeTreeWithParameters(this.p.idPrefix,this.p.levelStart,this.p.levelEnd,this.p.maxChildrenPerNode)},makeTreeWithParameters:function(B,I,C,D){if(I==C){return null}this.counter++;var H=Math.floor(Math.random()*10)+1;var E=Math.floor(Math.random()*200-100);var J={id:B+I+this.counter,name:I+"."+this.counter,data:[{key:"key1",value:H},{key:"key2",value:E}],children:[]};var F=Math.floor(Math.random()*D)+1;if(F==1&&I==0){F++}I++;for(var G=0;G<F;G++){var A=this.makeTreeWithParameters(B,I,C,D);if(A!=null){J.children[G]=A}}return J},request:function(C,D,B){this.p.idPrefix=C;this.p.levelEnd=D+1;var A=this.makeTree();B.onComplete(C,A)}};